<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ザオプション用シグナル（外部価格API）</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="header">
    <h1>シグナル（1/3/5分）</h1>
    <div class="sub">Android向け / URLで利用 / 外部価格API（Twelve Data）</div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>① APIキー（最初に1回だけ）</h2>
      <div class="row">
        <input id="apiKey" type="password" placeholder="Twelve Data API Key を貼り付け" />
        <button id="saveKeyBtn">保存</button>
      </div>
      <div class="note" id="keyStatus"></div>
    </section>

    <section class="card">
      <h2>② 設定</h2>
      <div class="grid">
        <label>
          通貨ペア
          <select id="symbol">
            <option value="USD/JPY">USD/JPY</option>
            <option value="EUR/USD">EUR/USD</option>
            <option value="EUR/JPY">EUR/JPY</option>
            <option value="AUD/JPY">AUD/JPY</option>
            <option value="GBP/JPY">GBP/JPY</option>
            <option value="AUD/USD">AUD/USD</option>
            <option value="NZD/JPY">NZD/JPY</option>
            <option value="BTC/USD">BTC/USD</option>
            <option value="BTC/JPY">BTC/JPY</option>
            <option value="ETH/JPY">ETH/JPY</option>
            <option value="ETH/USD">ETH/USD</option>
          </select>
        </label>

        <label>
          判定足（分）
          <select id="tf">
            <option value="1">1分</option>
            <option value="3">3分</option>
            <option value="5">5分</option>
          </select>
        </label>

        <label>
          判定の何秒前に表示する？
          <select id="leadSec">
            <option value="15">15秒前</option>
            <option value="10">10秒前</option>
            <option value="5">5秒前</option>
          </select>
        </label>
      </div>

      <div class="row">
        <button id="startBtn">開始</button>
        <button id="stopBtn" class="ghost" disabled>停止</button>
      </div>

      <div class="warn">
        ※この表示は目安です。勝率保証や必勝ではありません。取引は自己責任です。
      </div>
    </section>

    <section class="card">
      <h2>③ 状態</h2>
      <div class="status">
        <div><b>カウントダウン：</b><span id="countdown">--</span></div>
        <div><b>シグナル：</b><span id="signal">--</span></div>
        <div><b>勝率（目安）：</b><span id="winrate">--</span></div>
        <div><b>直近50回の実勝率：</b><span id="realWinrate">--</span></div>
        <div><b>根拠（簡易）：</b><span id="reason">--</span></div>
      </div>
    </section>

    <section class="card">
      <h2>④ 結果入力（学習用）</h2>
      <div class="row">
        <button id="winBtn" class="good" disabled>勝ち</button>
        <button id="loseBtn" class="bad" disabled>負け</button>
      </div>
      <div class="note">
        シグナル後に「勝ち/負け」を押すと、次回からあなたの傾向に合わせて勝率（目安）を調整します（端末内保存）。
      </div>
    </section>

    <section class="card">
      <h2>⑤ 履歴（直近）</h2>
      <div id="history" class="history"></div>
    </section>
  </main>

  <script type="module" src="./app2.js"></script>
</body>
</html>
